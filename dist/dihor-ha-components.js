var r="/* KARTA */\r\n.dihor-card {\r\n  margin: 0;\r\n  width: 100%;\r\n  background: var(--dihor-card-bg);\r\n  backdrop-filter: blur(20px);\r\n  border-radius: var(--dihor-card-border-radius);\r\n  box-sizing: border-box;\r\n  padding: 18px;\r\n  box-shadow: var(--dihor-card-shadow);\r\n  border: var(--dihor-card-border-size) solid var(--dihor-card-border-color);\r\n  font-family: sans-serif;\r\n}\r\n";class e extends HTMLElement{constructor(){super(...arguments),this._contentCreated=!1}setConfig(r){this._config=r}set hass(e){this._hass=e,this._contentCreated||(this.innerHTML=`\n        <style>/* Style variables for dihor cards */\r\n.dihor-theme-light {\r\n  --dihor-card-bg: rgba(255, 255, 255, 0.95);\r\n  --dihor-card-border-size: 1px;\r\n  --dihor-card-border-radius: 12px;\r\n  --dihor-card-border-color: rgba(255, 255, 255, 0.2);\r\n  --dihor-card-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);\r\n\r\n  --dihor-title-color: #1d1d1f;\r\n  --dihor-subtitle-color: #666;\r\n  --dihor-stat-bg: rgba(200, 200, 200, 0.2);\r\n\r\n  --dihor-badge-online-bg: #4caf50;\r\n  --dihor-badge-offline-bg: #ff3b30;\r\n  --dihor-badge-players-bg: #9c27b0;\r\n  --dihor-badge-version-bg: #007aff;\r\n  --dihor-badge-latency-bg: #ff9500;\r\n\r\n  --dihor-divider-color: rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.dihor-theme-dark {\r\n  --dihor-card-bg: rgba(48, 48, 48, 0.95);\r\n  --dihor-card-border-size: 1px;\r\n  --dihor-card-border-radius: 12px;\r\n  --dihor-card-border-color: rgba(255, 255, 255, 0.1);\r\n  --dihor-card-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);\r\n\r\n  --dihor-title-color: #f3f3f3;\r\n  --dihor-subtitle-color: #aaa;\r\n  --dihor-stat-bg: rgba(80, 80, 80, 0.5);\r\n\r\n  --dihor-badge-online-bg: #4caf50;\r\n  --dihor-badge-offline-bg: #ff3b30;\r\n  --dihor-badge-players-bg: #9c27b0;\r\n  --dihor-badge-version-bg: #007aff;\r\n  --dihor-badge-latency-bg: #ff9500;\r\n\r\n  --dihor-divider-color: rgba(255, 255, 255, 0.1);\r\n}\r\n${r}</style>\n        ${this.additionalCss()}\n        <ha-card>\n          ${this.cardHtml()}\n          ${this.cardCss()?`<style>${this.cardCss()}</style>`:""}\n        </ha-card>\n      `,this._card=this.querySelector("ha-card")||void 0,this._contentCreated=!0,this.onCardCreated()),this.applyTheme(),this.update(e)}get hass(){return this._hass}get card(){return this._card||this}applyTheme(){var r,e;const i=this.querySelector("ha-card"),n=document.querySelector("home-assistant"),t=null===(e=null===(r=null==n?void 0:n.hass)||void 0===r?void 0:r.themes)||void 0===e?void 0:e.darkMode;i&&(i.classList.toggle("dihor-theme-dark",!!t),i.classList.toggle("dihor-theme-light",!t))}additionalCss(){return""}cardCss(){return""}onCardCreated(){}update(r){}}class i extends e{setConfig(r){if(!r.entity)throw new Error("Entity is required");super.setConfig(r)}cardHtml(){return'\n      <div class="card-content">\n        <img style="width:100%;border-radius:50%" />\n      </div>\n    '}update(r){const e=r.states[this._config.entity];if(!e)return;const i=e.attributes.friendly_name||this._config.entity,n=e.attributes.entity_picture,t=this.querySelector("ha-card");t&&t.setAttribute("header",i);const o=this.querySelector("img");o&&n&&(o.setAttribute("src",n),o.setAttribute("alt",i))}getCardSize(){return 1}}customElements.get("dihor-person-card")||customElements.define("dihor-person-card",i),window.customCards=window.customCards||[],window.customCards.push({type:"dihor-person-card",name:"Dihor Person Card",preview:!0,description:"Displays Home Assistant person entity"});class n extends e{setConfig(r){if(!r.entity_prefix)throw new Error("entity_prefix is required");(r.entity_prefix.startsWith("sensor.")||r.entity_prefix.startsWith("binary_sensor."))&&console.warn('[dihor-minecraft-card] entity_prefix should not include "sensor." or "binary_sensor."'),super.setConfig(r)}additionalCss(){return`<style>${r}</style>`}cardHtml(){return'<div class="dihor-card dihor-theme-light">\r\n  <div class="dihor-card-header">\r\n    <div class="dihor-header-row">\r\n      <h1 class="dihor-card-title">My Minecraft Server</h1>\r\n      <span id="version" class="dihor-badge dihor-badge-version">0.0.0</span>\r\n    </div>\r\n    <div id="motd" class="dihor-card-subtitle">message of the day</div>\r\n  </div>\r\n\r\n  <ul class="dihor-grid-3">\r\n    <li class="dihor-stat">\r\n      <div class="dihor-stat-icon">ðŸ”Œ</div>\r\n      <div class="dihor-stat-label">Status</div>\r\n      <div class="dihor-stat-value">\r\n        <span id="status" class="dihor-badge dihor-badge-offline">Offline</span>\r\n      </div>\r\n    </li>\r\n\r\n    <li class="dihor-stat">\r\n      <div class="dihor-stat-icon">ðŸ‘¥</div>\r\n      <div class="dihor-stat-label">Players</div>\r\n      <div class="dihor-stat-value">\r\n        <span id="players" class="dihor-badge dihor-badge-players">0/0</span>\r\n      </div>\r\n    </li>\r\n\r\n    <li class="dihor-stat">\r\n      <div class="dihor-stat-icon">âš¡</div>\r\n      <div class="dihor-stat-label">Ping</div>\r\n      <div class="dihor-stat-value">\r\n        <span id="latency" class="dihor-badge dihor-badge-latency">0</span>\r\n      </div>\r\n    </li>\r\n  </ul>\r\n</div>\r\n'}cardCss(){return"/* NAGÅÃ“WEK */\r\n.dihor-card-header {\r\n  margin-bottom: 16px;\r\n  padding-bottom: 12px;\r\n  border-bottom: 1px solid var(--dihor-divider-color);\r\n}\r\n\r\n.dihor-header-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.dihor-card-title {\r\n  font-size: 20px;\r\n  font-weight: 700;\r\n  color: var(--dihor-title-color);\r\n  margin: 0;\r\n}\r\n\r\n.dihor-card-subtitle {\r\n  font-size: 14px;\r\n  color: var(--dihor-subtitle-color);\r\n  font-weight: 500;\r\n}\r\n\r\n/* SIATKA STATYSTYK */\r\n.dihor-grid-3 {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr 1fr;\r\n  gap: 12px;\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n/* POJEDYNCZA STATYSTYKA */\r\n.dihor-stat {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 10px 0;\r\n  background: var(--dihor-stat-bg);\r\n  border-radius: var(--dihor-card-border-radius);\r\n  text-align: center;\r\n}\r\n\r\n.dihor-stat-icon {\r\n  font-size: 18px;\r\n}\r\n\r\n.dihor-stat-label {\r\n  font-size: 11px;\r\n  color: var(--dihor-subtitle-color);\r\n  font-weight: 500;\r\n  margin-bottom: 4px;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.5px;\r\n}\r\n\r\n.dihor-stat-value {\r\n  font-size: 14px;\r\n  color: var(--dihor-title-color);\r\n  font-weight: 600;\r\n  line-height: 1.2;\r\n}\r\n\r\n/* BADGES */\r\n.dihor-badge {\r\n  font-size: 12px;\r\n  padding: 4px 8px;\r\n  border-radius: 12px;\r\n  font-weight: 600;\r\n  color: white;\r\n}\r\n\r\n.dihor-badge-online {\r\n  background: var(--dihor-badge-online-bg);\r\n}\r\n\r\n.dihor-badge-offline {\r\n  background: var(--dihor-badge-offline-bg);\r\n}\r\n\r\n.dihor-badge-players {\r\n  background: var(--dihor-badge-players-bg);\r\n}\r\n\r\n.dihor-badge-version {\r\n  background: var(--dihor-badge-version-bg);\r\n}\r\n\r\n.dihor-badge-latency {\r\n  background: var(--dihor-badge-latency-bg);\r\n}\r\n"}update(r){const e=this._config.entity_prefix,i=i=>{var n,t,o,a,d,s;return null!==(s=null!==(a=null!==(t=null===(n=r.states[`${e}${i}`])||void 0===n?void 0:n.state)&&void 0!==t?t:null===(o=r.states[`sensor.${e}${i}`])||void 0===o?void 0:o.state)&&void 0!==a?a:null===(d=r.states[`binary_sensor.${e}${i}`])||void 0===d?void 0:d.state)&&void 0!==s?s:"unavailable"},n=(r,e)=>{const i=this.querySelector(`#${r}`);i&&(i.textContent=e)},t=i("_status").toLowerCase(),o="unavailable"===t||"offline"===t||"0"===t,a=o?"":i("_world_message"),d=o?"0.0.0":i("_version"),s=o?"0":i("_players_online"),l=o?"0":i("_players_max"),c=(o?"0":i("_latency")).split(".")[0];n("motd",a),n("version",d),n("status",o?"Offline":"Online"),n("players",`${s} / ${l}`),n("latency",c);const h=this.querySelector("#status");h&&(h.className="dihor-badge "+(o?"dihor-badge-offline":"dihor-badge-online"))}getCardSize(){return 1}}customElements.get("dihor-minecraft-card")||customElements.define("dihor-minecraft-card",n),window.customCards=window.customCards||[],window.customCards.push({type:"dihor-minecraft-card",name:"Dihor Minecraft Card",preview:!0,description:"Monitor a Minecraft server via sensor entities"});class t extends e{connectedCallback(){this.startClock()}disconnectedCallback(){this._interval&&window.clearInterval(this._interval)}cardHtml(){return'<div class="dihor-card dihor-theme-light">\r\n  <div class="dihor-digital-clock">\r\n    <div id="time">00:00:00</div>\r\n  </div>\r\n</div>\r\n'}cardCss(){return".dihor-digital-clock {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 2.5rem;\r\n  font-weight: 600;\r\n  padding: 1rem 0;\r\n  color: var(--dihor-title-color);\r\n}\r\n"}onCardCreated(){this.startClock()}startClock(){this.updateTime(),this._interval&&window.clearInterval(this._interval),this._interval=window.setInterval(()=>this.updateTime(),1e3)}updateTime(){const r=(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),e=this.querySelector("#time");e&&(e.textContent=r)}getCardSize(){var r;return null!==(r=this._config.size)&&void 0!==r?r:2}}customElements.get("dihor-clock-card")||customElements.define("dihor-clock-card",t),window.customCards=window.customCards||[],window.customCards.push({type:"dihor-clock-card",name:"Dihor Clock Card",preview:!0,description:"Minimal digital clock card with configurable size"});class o extends e{setConfig(r){super.setConfig(r),this.waitForViewAndApply()}cardHtml(){return'<div class="dashboard-background-card"></div>\r\n'}cardCss(){return".dashboard-background-card {\r\n  height: 4px;\r\n  opacity: 0;\r\n  pointer-events: none;\r\n}\r\n"}onCardCreated(){this.waitForViewAndApply()}update(){this.waitForViewAndApply()}disconnectedCallback(){this.disconnectViewObserver()}async waitForViewAndApply(){if(this._viewElement)return;const r=await this.waitForView();r?(this._viewElement=r,console.log("dihor-dashboard-background-card: ZnalazÅ‚em hui-view"),this._viewElement.style.backgroundImage="url('https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1600&q=80')",this._viewElement.style.backgroundSize="cover",this._viewElement.style.backgroundPosition="center",this._viewElement.style.backgroundRepeat="no-repeat",this.observeView(r),await this.applyBackgroundToView()):console.warn("dihor-dashboard-background-card: Nie znaleziono hui-view po wielu prÃ³bach")}queryDeep(r,e=document){if("querySelector"in e){const i=e.querySelector(r);if(i)return i}const i="querySelectorAll"in e?Array.from(e.querySelectorAll("*")):[];for(const e of i)if(e.shadowRoot){const i=this.queryDeep(r,e.shadowRoot);if(i)return i}return null}async waitForView(){for(let r=0;r<50;r++){const r=this.queryDeep("hui-view");if(r)return console.log("dihor-dashboard-background-card: ZnalazÅ‚em hui-view w shadow DOM:",r.tagName),r;let e=this.parentElement;for(;e;){if(e.tagName&&e.tagName.toLowerCase().includes("hui-view"))return e;e=e.parentElement}await new Promise(r=>setTimeout(r,300))}return null}async applyBackgroundToView(){if(!this._viewElement)return;const r=await this.buildBackgroundStyle();r?(this._lastStyle={...r},this.applyStyle(r)):this.clearViewStyles()}buildBackgroundStyle(){return new Promise(r=>{const e=this._config;if(!e)return r(null);const i={};e.transition&&(i.transition=e.transition);const n=[],t=e.image||e.image_url;t&&n.push(`url("${this.safeUrl(t)}")`),e.gradient&&n.push(e.gradient),n.length&&(i.backgroundImage=n.join(", ")),e.color&&(i.backgroundColor=e.color),e.debug_background_color&&(i.backgroundColor=e.debug_background_color),e.position&&(i.backgroundPosition=e.position),e.size&&(i.backgroundSize=e.size),e.repeat&&(i.backgroundRepeat=e.repeat),e.blend_mode&&(i.backgroundBlendMode=e.blend_mode),e.attachment&&(i.backgroundAttachment=e.attachment),r(Object.keys(i).length?i:null)})}applyStyle(r){this._viewElement&&Object.entries(r).forEach(([r,e])=>{this._viewElement.style.setProperty(r,e)})}clearViewStyles(){if(!this._viewElement)return;["backgroundImage","backgroundColor","backgroundPosition","backgroundSize","backgroundRepeat","backgroundBlendMode","backgroundAttachment","transition"].forEach(r=>{this._viewElement.style.removeProperty(r)})}observeView(r){this._viewObserver&&this.disconnectViewObserver(),this._viewObserver=new MutationObserver(()=>{this._lastStyle&&this.applyStyle({...this._lastStyle})}),this._viewObserver.observe(r,{attributes:!0,attributeFilter:["style","class"]})}disconnectViewObserver(){this._viewObserver&&(this._viewObserver.disconnect(),this._viewObserver=void 0)}safeUrl(r){const e=r.trim();return e?e.replace(/"/g,'\\"'):""}getCardSize(){return 1}}customElements.get("dihor-dashboard-background-card")||customElements.define("dihor-dashboard-background-card",o),window.customCards=window.customCards||[],window.customCards.push({type:"dihor-dashboard-background-card",name:"Dihor Dashboard Background Card",preview:!0,description:"Take over the view background using a configured color, gradient or image."});export{t as ClockCard,o as DashboardBackgroundCard,n as MinecraftCard,i as PersonCard};
